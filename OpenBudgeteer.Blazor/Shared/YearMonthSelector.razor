@using OpenBudgeteer.Core.ViewModels
@using OpenBudgeteer.Core.Common

<style>
    .btn-margin-bottom {
        margin-bottom: 5px;
    }
    .yearMonth-margin {
        margin-left: 5px;
    }
</style>

<div class="col-md-auto d-flex justify-content-end">
    <button class="btn btn-sm btn-primary btn-margin-bottom" @onclick="@(DataContext.PreviousMonth)">&lt;</button>
    <select class="form-control form-control-sm yearMonth-margin" style="width: auto" @onchange=@SelectedMonth_SelectionChanged>
        @foreach (var month in DataContext.Months)
        {
            if (month == DataContext.SelectedMonth)
            {
                <option selected value="@month">@_monthConverter.ConvertMonth(month)</option>
            }
            else
            {
                <option value="@month">@_monthConverter.ConvertMonth(month)</option>
            }
        }
    </select>
    <input class="form-control form-control-sm yearMonth-margin" style="text-align: right; width: 50px" type="text" @bind="DataContext.SelectedYear" />
    <button class="btn btn-sm btn-primary btn-margin-bottom yearMonth-margin" @onclick="@(DataContext.NextMonth)">&gt;</button>
</div>

@code {
    [Parameter]
    public YearMonthSelectorViewModel DataContext { get; set; }

    readonly MonthOutputConverter _monthConverter = new MonthOutputConverter();

    void SelectedMonth_SelectionChanged(ChangeEventArgs e)
    {
        DataContext.SelectedMonth = Convert.ToInt32(e.Value);
    }
}
